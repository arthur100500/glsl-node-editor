{"ast":null,"code":"import { jsx } from 'react/jsx-runtime';\nimport { useCallback } from 'react';\nimport { useStore, useNodeId, getRectOfNodes, internalsSymbol, Position } from '@reactflow/core';\nimport cc from 'classcat';\nimport shallow from 'zustand/shallow';\nimport { createPortal } from 'react-dom';\nconst selector = state => state.domNode?.querySelector('.react-flow__renderer');\nfunction NodeToolbarPortal(_ref) {\n  let {\n    children\n  } = _ref;\n  const wrapperRef = useStore(selector);\n  if (!wrapperRef) {\n    return null;\n  }\n  return createPortal(children, wrapperRef);\n}\nconst nodeEqualityFn = (a, b) => a?.positionAbsolute?.x === b?.positionAbsolute?.x && a?.positionAbsolute?.y === b?.positionAbsolute?.y && a?.width === b?.width && a?.height === b?.height && a?.selected === b?.selected && a?.[internalsSymbol]?.z === b?.[internalsSymbol]?.z;\nconst nodesEqualityFn = (a, b) => {\n  return a.length === b.length && a.every((node, i) => nodeEqualityFn(node, b[i]));\n};\nconst storeSelector = state => ({\n  transform: state.transform,\n  nodeOrigin: state.nodeOrigin,\n  selectedNodesCount: Array.from(state.nodeInternals.values()).filter(node => node.selected).length\n});\nfunction getTransform(nodeRect, transform, position, offset) {\n  // position === Position.Top\n  let xPos = (nodeRect.x + nodeRect.width / 2) * transform[2] + transform[0];\n  let yPos = nodeRect.y * transform[2] + transform[1] - offset;\n  let xShift = -50;\n  let yShift = -100;\n  switch (position) {\n    case Position.Right:\n      xPos = (nodeRect.x + nodeRect.width) * transform[2] + transform[0] + offset;\n      yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n      xShift = 0;\n      yShift = -50;\n      break;\n    case Position.Bottom:\n      yPos = (nodeRect.y + nodeRect.height) * transform[2] + transform[1] + offset;\n      yShift = 0;\n      break;\n    case Position.Left:\n      xPos = nodeRect.x * transform[2] + transform[0] - offset;\n      yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\n      xShift = -100;\n      yShift = -50;\n      break;\n  }\n  return `translate(${xPos}px, ${yPos}px) translate(${xShift}%, ${yShift}%)`;\n}\nfunction NodeToolbar(_ref2) {\n  let {\n    nodeId,\n    children,\n    className,\n    style,\n    isVisible,\n    position = Position.Top,\n    offset = 10,\n    ...rest\n  } = _ref2;\n  const contextNodeId = useNodeId();\n  const nodesSelector = useCallback(state => {\n    const nodeIds = Array.isArray(nodeId) ? nodeId : [nodeId || contextNodeId || ''];\n    return nodeIds.reduce((acc, id) => {\n      const node = state.nodeInternals.get(id);\n      if (node) {\n        acc.push(node);\n      }\n      return acc;\n    }, []);\n  }, [nodeId, contextNodeId]);\n  const nodes = useStore(nodesSelector, nodesEqualityFn);\n  const {\n    transform,\n    nodeOrigin,\n    selectedNodesCount\n  } = useStore(storeSelector, shallow);\n  const isActive = typeof isVisible === 'boolean' ? isVisible : nodes.length === 1 && nodes[0].selected && selectedNodesCount === 1;\n  if (!isActive || !nodes.length) {\n    return null;\n  }\n  const nodeRect = getRectOfNodes(nodes, nodeOrigin);\n  const zIndex = Math.max(...nodes.map(node => (node[internalsSymbol]?.z || 1) + 1));\n  const wrapperStyle = {\n    position: 'absolute',\n    transform: getTransform(nodeRect, transform, position, offset),\n    zIndex,\n    ...style\n  };\n  return jsx(NodeToolbarPortal, {\n    children: jsx(\"div\", {\n      style: wrapperStyle,\n      className: cc(['react-flow__node-toolbar', className]),\n      ...rest,\n      children: children\n    })\n  });\n}\nexport { NodeToolbar };","map":{"version":3,"names":["jsx","useCallback","useStore","useNodeId","getRectOfNodes","internalsSymbol","Position","cc","shallow","createPortal","selector","state","domNode","querySelector","NodeToolbarPortal","children","wrapperRef","nodeEqualityFn","a","b","positionAbsolute","x","y","width","height","selected","z","nodesEqualityFn","length","every","node","i","storeSelector","transform","nodeOrigin","selectedNodesCount","Array","from","nodeInternals","values","filter","getTransform","nodeRect","position","offset","xPos","yPos","xShift","yShift","Right","Bottom","Left","NodeToolbar","nodeId","className","style","isVisible","Top","rest","contextNodeId","nodesSelector","nodeIds","isArray","reduce","acc","id","get","push","nodes","isActive","zIndex","Math","max","map","wrapperStyle"],"sources":["/home/arhur/Documents/GitHub/NodeEditor/node_modules/@reactflow/node-toolbar/dist/esm/index.js"],"sourcesContent":["import { jsx } from 'react/jsx-runtime';\nimport { useCallback } from 'react';\nimport { useStore, useNodeId, getRectOfNodes, internalsSymbol, Position } from '@reactflow/core';\nimport cc from 'classcat';\nimport shallow from 'zustand/shallow';\nimport { createPortal } from 'react-dom';\n\nconst selector = (state) => state.domNode?.querySelector('.react-flow__renderer');\r\nfunction NodeToolbarPortal({ children }) {\r\n    const wrapperRef = useStore(selector);\r\n    if (!wrapperRef) {\r\n        return null;\r\n    }\r\n    return createPortal(children, wrapperRef);\r\n}\n\nconst nodeEqualityFn = (a, b) => a?.positionAbsolute?.x === b?.positionAbsolute?.x &&\r\n    a?.positionAbsolute?.y === b?.positionAbsolute?.y &&\r\n    a?.width === b?.width &&\r\n    a?.height === b?.height &&\r\n    a?.selected === b?.selected &&\r\n    a?.[internalsSymbol]?.z === b?.[internalsSymbol]?.z;\r\nconst nodesEqualityFn = (a, b) => {\r\n    return a.length === b.length && a.every((node, i) => nodeEqualityFn(node, b[i]));\r\n};\r\nconst storeSelector = (state) => ({\r\n    transform: state.transform,\r\n    nodeOrigin: state.nodeOrigin,\r\n    selectedNodesCount: Array.from(state.nodeInternals.values()).filter((node) => node.selected).length,\r\n});\r\nfunction getTransform(nodeRect, transform, position, offset) {\r\n    // position === Position.Top\r\n    let xPos = (nodeRect.x + nodeRect.width / 2) * transform[2] + transform[0];\r\n    let yPos = nodeRect.y * transform[2] + transform[1] - offset;\r\n    let xShift = -50;\r\n    let yShift = -100;\r\n    switch (position) {\r\n        case Position.Right:\r\n            xPos = (nodeRect.x + nodeRect.width) * transform[2] + transform[0] + offset;\r\n            yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\r\n            xShift = 0;\r\n            yShift = -50;\r\n            break;\r\n        case Position.Bottom:\r\n            yPos = (nodeRect.y + nodeRect.height) * transform[2] + transform[1] + offset;\r\n            yShift = 0;\r\n            break;\r\n        case Position.Left:\r\n            xPos = nodeRect.x * transform[2] + transform[0] - offset;\r\n            yPos = (nodeRect.y + nodeRect.height / 2) * transform[2] + transform[1];\r\n            xShift = -100;\r\n            yShift = -50;\r\n            break;\r\n    }\r\n    return `translate(${xPos}px, ${yPos}px) translate(${xShift}%, ${yShift}%)`;\r\n}\r\nfunction NodeToolbar({ nodeId, children, className, style, isVisible, position = Position.Top, offset = 10, ...rest }) {\r\n    const contextNodeId = useNodeId();\r\n    const nodesSelector = useCallback((state) => {\r\n        const nodeIds = Array.isArray(nodeId) ? nodeId : [nodeId || contextNodeId || ''];\r\n        return nodeIds.reduce((acc, id) => {\r\n            const node = state.nodeInternals.get(id);\r\n            if (node) {\r\n                acc.push(node);\r\n            }\r\n            return acc;\r\n        }, []);\r\n    }, [nodeId, contextNodeId]);\r\n    const nodes = useStore(nodesSelector, nodesEqualityFn);\r\n    const { transform, nodeOrigin, selectedNodesCount } = useStore(storeSelector, shallow);\r\n    const isActive = typeof isVisible === 'boolean' ? isVisible : nodes.length === 1 && nodes[0].selected && selectedNodesCount === 1;\r\n    if (!isActive || !nodes.length) {\r\n        return null;\r\n    }\r\n    const nodeRect = getRectOfNodes(nodes, nodeOrigin);\r\n    const zIndex = Math.max(...nodes.map((node) => (node[internalsSymbol]?.z || 1) + 1));\r\n    const wrapperStyle = {\r\n        position: 'absolute',\r\n        transform: getTransform(nodeRect, transform, position, offset),\r\n        zIndex,\r\n        ...style,\r\n    };\r\n    return (jsx(NodeToolbarPortal, { children: jsx(\"div\", { style: wrapperStyle, className: cc(['react-flow__node-toolbar', className]), ...rest, children: children }) }));\r\n}\n\nexport { NodeToolbar };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}